<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Anime Tracker</title>
  <link rel="stylesheet" href="popup.css">
  <!-- Opcional: Iconos de Material Symbols -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>

  <div class="app-container">
    <!-- Barra de búsqueda superior (nueva) -->
    <div class="search-bar-container">
      <button class="menu-btn">
        <span class="material-symbols-outlined">menu</span>
      </button>
      <div class="search-input-wrapper">
        <span class="material-symbols-outlined search-icon">search</span>
        <input type="text" id="url_anime_buscar" class="search-input" placeholder="Search for an anime..." value="">
      </div>
      <div class="header-buttons-container">
        <button class="save-btn-icon">
          <span class="material-symbols-outlined">save</span>
        </button>
        <button class="folder-btn-icon">
          <span class="material-symbols-outlined">folder</span>
        </button>
        <div class="settings-dropdown-container">
          <button class="settings-btn" id="settings_toggle_btn">
            <span class="material-symbols-outlined">settings</span>
          </button>
          <div class="settings-dropdown hidden" id="settings_dropdown">
            <div class="py-1">
              <a href="#" class="dropdown-item" role="menuitem">Exportar</a>
              <a href="#" class="dropdown-item" role="menuitem">Importar</a>
              <a href="#" class="dropdown-item" role="menuitem">Opciones</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Portada -->
    <div class="cover-container" id="cover_container" style='background-image: url("https://lh3.googleusercontent.com/-tGHmZ6GF0cc/WpohCECY6kI/AAAAAAABdDI/fdZBbrmha_A9gOQ9wp-qKgThLFr1rUq0QCHMYCw/s0/ef3ba899fa0c572bebb18586d81b151c2d72f2bf.jpg");'>
      <!-- Imagen de portada como elemento oculto para el script -->
      <img id="anime_portada" src="https://lh3.googleusercontent.com/-tGHmZ6GF0cc/WpohCECY6kI/AAAAAAABdDI/fdZBbrmha_A9gOQ9wp-qKgThLFr1rUq0QCHMYCw/s0/ef3ba899fa0c572bebb18586d81b151c2d72f2bf.jpg" style="display: none;">
    </div>

    <!-- Información principal -->
    <div class="info-section">
      <div class="title-id-container">
        <h1 id="anime_nombre" class="anime-title">Anime Génerico</h1>
        <div class="id-container">
          <p class="anime-id" id="anime_id_display">ID: anime-generico</p>
          <span class="material-symbols-outlined copy-icon" id="copy_id_btn">content_copy</span>
        </div>
      </div>

      <!-- Favorito (Toggle Switch Púrpura) -->
      <div class="favorite-container">
        <span class="fav-label">Favorite</span>
        <label class="switch-purple">
          <input type="checkbox" id="favorito_checkbox">
          <span class="slider"></span>
        </label>
      </div>
    </div>

    <!-- Temporada/Episodio y Botón -->
    <div class="progress-section">
      <div class="season-episode-controls">
        <div class="control-group">
          <p class="control-label">S</p>
          <div class="number-control">
            <button class="number-btn" id="temp_dec_btn">-</button>
            <input type="number" id="temporada_actual" class="number-input" value="1" min="1">
            <button class="number-btn" id="temp_inc_btn">+</button>
          </div>
        </div>
        <div class="control-group">
          <p class="control-label">E</p>
          <div class="number-control">
            <button class="number-btn" id="ep_dec_btn">-</button>
            <input type="number" id="episodio_actual" class="number-input" value="5" min="1">
            <button class="number-btn" id="ep_inc_btn">+</button>
          </div>
        </div>
      </div>
      <button id="cap_visto" class="watched-btn">Episode Watched</button>
    </div>

    <!-- Rating y Seguimiento -->
    <div class="rating-status-section">
      <div class="rating-container">
        <p class="control-label">Rating</p>
        <div class="rating-controls">
          <span class="material-symbols-outlined rating-star">star</span>
          <span class="rating-value" id="nota_usuario_display">8</span>
          <button class="rating-btn" id="rating_dec_btn">-</button>
          <button class="rating-btn" id="rating_inc_btn">+</button>
        </div>
      </div>
      <div class="status-select-container">
        <select id="lista_serie_viendo" class="custom-select">
          <option value="ver">Ver</option>
          <option value="viendo" selected>Viendo</option>
          <option value="visto">Visto</option>
          <option value="abandonado">Abandonado</option>
        </select>
      </div>
    </div>

    <!-- Audio y Subs -->
    <div class="audio-subs-section">
      <p class="section-label">Audio & Subtitles</p>
      <div class="audio-subs-controls">
        <select id="doblaje" class="custom-select">
          <option value="es">🇪🇸 Español</option>
          <option value="jp">🇯🇵 Japonés</option>
          <option value="en">🇺🇸 Inglés</option>
          <option value="kr">🇰🇷 Coreano</option>
          <option value="cn">🇨🇳 Chino</option>
          <option value="tr">🇹🇷 Turco</option>
        </select>
        <select id="subtitulos" class="custom-select">
          <option value="-">🚫 No</option>
          <option value="es">🇪🇸 Español</option>
          <option value="jp">🇯🇵 Japonés</option>
          <option value="en">🇺🇸 Inglés</option>
          <option value="kr">🇰🇷 Coreano</option>
          <option value="cn">🇨🇳 Chino</option>
          <option value="tr">🇹🇷 Turco</option>
        </select>
      </div>
    </div>

    <!-- Estreno y Emisión -->
    <div class="release-schedule-grid">
      <div class="grid-item">
        <p class="grid-label">Temporada Estreno</p>
        <select id="temporada_estreno" class="custom-select">
          <option value="">-</option>
          <option value="primavera">🌸 Primavera</option>
          <option value="verano">☀️ Verano</option>
          <option value="otoño">🍂 Otoño</option>
          <option value="invierno">❄️ Invierno</option>
        </select>
      </div>
      <div class="grid-item">
        <p class="grid-label">Año Estreno</p>
        <input type="number" id="anyo_estreno" class="grid-input" placeholder="Año" min="1900" max="2100">
      </div>
    </div>

    <!-- Día de estreno y Estado de emisión -->
    <div class="day-status-section">
      <div class="day-select-container">
        <p class="section-label">Día de estreno</p>
        <select id="tags_dia" class="custom-select">
          <option value="">-</option>
          <option value="lunes">lunes</option>
          <option value="martes">martes</option>
          <option value="miercoles">miércoles</option>
          <option value="jueves">jueves</option>
          <option value="viernes">viernes</option>
          <option value="sabado">sábado</option>
          <option value="domingo">domingo</option>
        </select>
      </div>
      <div class="emission-status-container">
        <p class="section-label">Estado de Emisión</p>
        <select id="lista_anime_estado" class="custom-select">
          <option value="desconocido">? Desconocido</option>
          <option value="emisión">Emisión</option>
          <option value="finalizado">Finalizado</option>
          <option value="cancelada">Cancelada</option>
          <option value="peli-ova">Película/Ova</option>
        </select>
      </div>
    </div>

    <!-- Géneros -->
    <div class="genres-section">
      <div class="section-header">
        <p class="section-label">Genres</p>
        <button id="editar_generos_btn" class="edit-btn">Edit Genres</button>
      </div>
      <p id="generos_display" class="genres-list">Action, Dark Fantasy, Post-Apocalyptic</p>
      <input type="text" id="generos_input" class="genres-input" value="Action, Dark Fantasy, Post-Apocalyptic" style="display: none;">
    </div>

    <!-- Relacionado con -->
    <div class="related-section">
      <p class="section-label">Relacionado con</p>
      <div class="related-controls">
        <input type="text" id="anime_relacionado" class="related-input" placeholder="Buscar anime relacionado">
        <select id="relacion_url" class="custom-select">
          <option value="secuela" selected>Secuela</option>
          <option value="precuela">Precuela</option>
          <option value="alternativa">Versión Alternativa</option>
          <option value="paralela">Historia Paralela</option>
        </select>
      </div>
    </div>

    <!-- Botón final -->
    <button id="guardar" class="save-btn-bottom">Save to Folders</button>

    <!-- Campo oculto para Portada URL (original) -->
    <div class="original-field" style="display: none;">
      <label for="url_imagen">Portada URL (Original):</label>
      <input type="text" id="url_imagen" name="url_imagen" placeholder="https://ejemplo.com/imagen.jpg">
    </div>

    <!-- Campo oculto para Capítulo Temp/Cap (original) -->
    <div class="original-field" style="display: none;">
      <label for="capitulo_temp_cap">T/E (Original):</label>
      <input type="text" id="capitulo_temp_cap" name="capitulo_temp_cap" placeholder="Temporada/Capítulo">
    </div>

    <!-- Campo oculto para Tipo de tag (original) -->
    <div class="original-field" style="display: none;">
      <label for="tags_tipo">Tipo de tag (Original):</label>
      <input type="text" id="tags_tipo" name="tags_tipo" placeholder="serie, pelicula, ova, etc.">
    </div>

    <!-- Campo oculto para URL Actual (original) -->
    <div class="original-field" style="display: none;">
      <label for="url_actual">URL Actual:</label>
      <span id="url_actual">Cargando...</span>
    </div>

    <!-- Campo oculto para Nombre de Anime (input) -->
    <div class="original-field" style="display: none;">
      <label for="url_anime">Nombre del anime:</label>
      <input type="text" id="url_anime" name="url_anime" placeholder="Nombre de la url">
    </div>

    <!-- Campo oculto para Nota Usuario (input) -->
    <div class="original-field" style="display: none;">
      <label for="nota_usuario">Nota Usuario (input):</label>
      <input type="number" id="nota_usuario" name="nota_usuario" min="1" max="10" value="8">
    </div>

    <!-- Botón oculto para buscar (original) -->
    <div class="original-field" style="display: none;">
      <button id="btn_buscar">Buscar</button>
    </div>

    <!-- Botón oculto para mostrar carpetas (original) -->
    <div class="original-field" style="display: none;">
      <button id="mostrarCarpetas">Mostrar carpetas</button>
    </div>

  </div>

  <script type="module" src="popup_script.js"></script>
  <!-- <script type="module" src="popup.js"></script> -->
</body>
</html>